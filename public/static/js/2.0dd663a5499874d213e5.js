webpackJsonp([2],{395:function(e,t,l){l(466);var s=l(4)(l(468),l(472),null,null);e.exports=s.exports},466:function(e,t,l){var s=l(467);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);l(383)("13bbcbe2",s,!0)},467:function(e,t,l){(e.exports=l(382)()).push([e.i,"\n#manage-page .entry-list {\n  width: 100%;\n  padding: 15px;\n}\n#manage-page .entry-list .classify-title {\n    margin: 15px auto;\n}\n",""])},468:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=l(59),a=l.n(s),i=l(469),o=l.n(i),n=l(9);t.default={name:"Manage",data:function(){return{isLoading:!1,isShowDlgFlag:!1,activeName:"first",classifyList:n.default.classify,themeList:n.default.theme,tableData:[],tableControl:{pageCount:1,pageSize:15,sortType:-1,sortTarget:"created"},currentRowData:[]}},components:{EditDialog:o.a},created:function(){this.initFetch()},watch:{activeName:function(e){this.initFetch()}},methods:{initFetch:function(){var e=this,t={};a()(t,this.tableControl),t.active=!("first"===this.activeName),this.isLoading=!0,this.$apis.getAllLinks(t).then(function(t){e.isLoading=!1,e.tableData=t}).catch(function(t){e.isLoading=!1,e.$message.error(""+t)}).finally(function(){e.isLoading=!1})},fillThemeName:function(e,t){var l="";return this.themeList[e].map(function(e){e.value===t&&(l=e.key)}),l},handleClick:function(){},handleSizeChange:function(e){this.tableControl.pageSize=e},handleCurrentChange:function(e){this.tableControl.pageCount=e},handleEdit:function(e){this.isShowDlgFlag=!0,this.currentRowData=e},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除该条目, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.operatorId=t.userInfo&&t.userInfo._id,t.isLoading=!0,t.$apis.deleteNiceLinks(e).then(function(e){t.$message({type:"success",message:"删除成功!"}),t.initFetch(),t.isLoading=!1}).catch(function(e){t.isLoading=!1,t.$message.error(""+e)})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},onUpdateSuccess:function(){this.initFetch()}},locales:{en:{},zh:{}}}},469:function(e,t,l){var s=l(4)(l(470),l(471),null,null);e.exports=s.exports},470:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=l(9);t.default={data:function(){return{isShowDlgFlag:!1,isLoading:!1,fillForm:{urlPath:"",title:"",desc:"",classify:"",theme:"",tags:[]},themeList:[],tagsList:s.default.tags,classifyList:s.default.classify,rules:{urlPath:[{required:!0,validator:this.$verifyUrl,trigger:"change,blur"}],title:[{required:!0,message:this.$t("pleaseEnter")+this.$t("linkNameStr"),trigger:"change,blur"}],theme:[{required:!0,message:this.$t("pleaseSelect")+this.$t("linkThemeStr"),trigger:"change,blur"}],classify:[{required:!0,message:this.$t("pleaseSelect")+this.$t("linkClassifyStr"),trigger:"change,blur"}]}}},props:{value:{type:Boolean,default:!1},pdata:{type:Object,default:{}}},computed:{},watch:{value:function(e){this.isShowDlgFlag=e},isShowDlgFlag:function(e){this.$emit("input",e)},"fillForm.classify":function(e){this.themeList=s.default.theme[this.fillForm.classify]||[]},pdata:function(e){this.fillForm=this.$_.cloneDeep(e)}},methods:{onCommitClick:function(){var e=this;this.$refs.fillForm.validate(function(t){if(t){e.isLoading=!0;var l=e.$_.clone(e.fillForm,!0);l.userId=e.userInfo&&e.userInfo._id,l.role=e.userInfo&&e.userInfo.role,l.createdBy=e.userInfo&&e.userInfo.username,e.$apis.updateNiceLinks(l).then(function(t){e.isLoading=!1,e.isShowDlgFlag=!1,e.$message({message:e.$t("successAddTip"),type:"success"}),e.$bus.emit("update-success")}).catch(function(t){e.isLoading=!1,e.$message.error(""+t)})}})}},locales:{en:{successAddTip:"Well, you have successfully added the link"},zh:{successAddTip:"很好，您已成功修改该链接"}}}},471:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{attrs:{id:"inject-links-dlg"}},[l("el-dialog",{directives:[{name:"model",rawName:"v-model",value:e.isShowDlgFlag,expression:"isShowDlgFlag"},{name:"loading",rawName:"v-loading.body",value:e.isLoading,expression:"isLoading",modifiers:{body:!0}}],attrs:{stripe:"",title:e.$t("injectLinks"),size:"small"},domProps:{value:e.isShowDlgFlag},on:{input:function(t){e.isShowDlgFlag=t}}},[l("div",{staticClass:"form form-horizontal"},[l("el-form",{ref:"fillForm",attrs:{model:e.fillForm,rules:e.rules}},[l("div",{staticClass:"form-group"},[l("label",{staticClass:"col-sm-3 control-label"},[e._v(" "+e._s(this.$t("linkAddressStr"))+" "),l("em",[e._v("*")]),e._v("：")]),e._v(" "),l("div",{staticClass:"col-sm-8"},[l("el-form-item",{attrs:{prop:"urlPath"}},[l("el-input",{directives:[{name:"model",rawName:"v-model",value:e.fillForm.urlPath,expression:"fillForm.urlPath"}],attrs:{placeholder:this.$t("pleaseEnter")+this.$t("linkAddressStr")},domProps:{value:e.fillForm.urlPath},on:{input:function(t){e.fillForm.urlPath=t}}})],1)],1)]),e._v(" "),l("div",{staticClass:"form-group"},[l("label",{staticClass:"col-sm-3 control-label"},[e._v(" "+e._s(this.$t("linkNameStr"))+" "),l("em",[e._v("*")]),e._v("：")]),e._v(" "),l("div",{staticClass:"col-sm-8"},[l("el-form-item",{attrs:{prop:"title"}},[l("el-input",{directives:[{name:"model",rawName:"v-model",value:e.fillForm.title,expression:"fillForm.title"}],attrs:{placeholder:this.$t("pleaseEnter")+this.$t("linkNameStr")},domProps:{value:e.fillForm.title},on:{input:function(t){e.fillForm.title=t}}})],1)],1)]),e._v(" "),l("div",{staticClass:"form-group"},[l("label",{staticClass:"col-sm-3 control-label"},[e._v(" "+e._s(this.$t("linkClassifyStr"))+" "),l("em",[e._v("*")]),e._v("：")]),e._v(" "),l("div",{staticClass:"col-sm-8"},[l("el-form-item",{attrs:{prop:"classify"}},[l("el-select",{directives:[{name:"model",rawName:"v-model",value:e.fillForm.classify,expression:"fillForm.classify"}],staticClass:"wrap-block",attrs:{placeholder:this.$t("pleaseSelect")+this.$t("linkClassifyStr")},domProps:{value:e.fillForm.classify},on:{input:function(t){e.fillForm.classify=t}}},e._l(e.classifyList,function(e){return l("el-option",{key:e.key,attrs:{label:e.key,value:e.value}})}))],1)],1)]),e._v(" "),l("div",{staticClass:"form-group"},[l("label",{staticClass:"col-sm-3 control-label"},[e._v(" "+e._s(this.$t("linkThemeStr"))+" "),l("em",[e._v("*")]),e._v("：")]),e._v(" "),l("div",{staticClass:"col-sm-8"},[l("el-form-item",{attrs:{prop:"theme"}},[l("el-select",{directives:[{name:"model",rawName:"v-model",value:e.fillForm.theme,expression:"fillForm.theme"}],staticClass:"wrap-block",attrs:{placeholder:this.$t("pleaseSelect")+this.$t("linkThemeStr")},domProps:{value:e.fillForm.theme},on:{input:function(t){e.fillForm.theme=t}}},e._l(e.themeList,function(e){return l("el-option",{key:e.key,attrs:{label:e.key,value:e.value}})}))],1)],1)]),e._v(" "),l("div",{staticClass:"form-group"},[l("label",{staticClass:"col-sm-3 control-label"},[e._v(" "+e._s(this.$t("linkTagsStr"))+" "),l("em",[e._v("*")]),e._v("：")]),e._v(" "),l("div",{staticClass:"col-sm-8"},[l("el-form-item",{attrs:{prop:"tags"}},[l("el-select",{directives:[{name:"model",rawName:"v-model",value:e.fillForm.tags,expression:"fillForm.tags"}],staticClass:"wrap-block",attrs:{"allow-create":"",multiple:"",filterable:"","multiple-limit":3,placeholder:this.$t("pleaseSelect")+this.$t("linkTagsStr")},domProps:{value:e.fillForm.tags},on:{input:function(t){e.fillForm.tags=t}}},e._l(e.tagsList,function(e,t){return l("el-option",{key:t,attrs:{label:e,value:e}})}))],1)],1)]),e._v(" "),l("div",{staticClass:"form-group"},[l("label",{staticClass:"col-sm-3 control-label"},[e._v(" "+e._s(this.$t("linkDescStr"))+" "),l("em",[e._v("*")]),e._v("：")]),e._v(" "),l("div",{staticClass:"col-sm-8"},[l("el-form-item",{attrs:{prop:"desc"}},[l("el-input",{directives:[{name:"model",rawName:"v-model",value:e.fillForm.desc,expression:"fillForm.desc"}],attrs:{placeholder:this.$t("pleaseSelect")+this.$t("linkDescStr")},domProps:{value:e.fillForm.desc},on:{input:function(t){e.fillForm.desc=t}}})],1)],1)]),e._v(" "),l("div",{staticClass:"form-group"},[l("label",{staticClass:"col-sm-3 control-label"},[e._v(" "+e._s(this.$t("isAcive"))+" "),l("em",[e._v("*")]),e._v("：")]),e._v(" "),l("div",{staticClass:"col-sm-8"},[l("el-switch",{directives:[{name:"model",rawName:"v-model",value:e.fillForm.active,expression:"fillForm.active"}],attrs:{"on-text":e.$t("yes"),"off-text":e.$t("no"),"on-color":"#13ce66","off-color":"#ff4949"},domProps:{value:e.fillForm.active},on:{input:function(t){e.fillForm.active=t}}})],1)])])],1),e._v(" "),l("div",{staticClass:"dialog-footer",slot:"footer"},[l("el-button",{on:{click:function(t){e.isShowDlgFlag=!1}}},[e._v(e._s(this.$t("cancel")))]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:e.onCommitClick}},[e._v(e._s(this.$t("confirm")))])],1)])],1)},staticRenderFns:[]}},472:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"wrapper",attrs:{id:"manage-page"}},[l("div",{directives:[{name:"loading",rawName:"v-loading.body",value:e.isLoading,expression:"isLoading",modifiers:{body:!0}}],staticClass:"panel-default"},[l("div",{staticClass:"panel-body"},[l("div",{staticClass:"main-container"},[l("div",{staticClass:"entry-list"},[l("el-tabs",{directives:[{name:"model",rawName:"v-model",value:e.activeName,expression:"activeName"}],domProps:{value:e.activeName},on:{"tab-click":e.handleClick,input:function(t){e.activeName=t}}},[l("el-tab-pane",{attrs:{label:"未审核",name:"first"}}),e._v(" "),l("el-tab-pane",{attrs:{label:"已审核",name:"second"}})],1),e._v(" "),l("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[l("el-table-column",{attrs:{prop:"classify",label:e.$t("linkClassifyStr"),width:"100"},scopedSlots:{default:function(t){return[e._v("\n                "+e._s(e.classifyList[t.row.classify].key)+"\n              ")]}}}),e._v(" "),l("el-table-column",{attrs:{prop:"active",label:"是否已激活",width:"100"},scopedSlots:{default:function(t){return[l("el-tag",{attrs:{type:t.row.active?"success":"error"}},[e._v("\n                  "+e._s(t.row.active?"是":"否")+"\n                ")])]}}}),e._v(" "),l("el-table-column",{attrs:{prop:"theme",label:e.$t("linkThemeStr"),width:"100"},scopedSlots:{default:function(t){return[e._v("\n              "+e._s(e.fillThemeName(t.row.classify,t.row.theme))+"\n              ")]}}}),e._v(" "),l("el-table-column",{attrs:{prop:"urlPath",label:e.$t("linkAddressStr"),width:"180"},scopedSlots:{default:function(t){return[l("a",{staticClass:"title-link",attrs:{href:t.row.urlPath,target:"_blank"}},[e._v("\n                  "+e._s(t.row.title)+"\n                ")])]}}}),e._v(" "),l("el-table-column",{attrs:{prop:"created",label:e.$t("createdDateStr"),"min-width":"100"},scopedSlots:{default:function(t){return[e._v(e._s(e._f("dateConvert")(t.row.created)))]}}}),e._v(" "),l("el-table-column",{attrs:{label:"操作",width:"140"},scopedSlots:{default:function(t){return[l("el-button",{attrs:{size:"small"},on:{click:function(l){e.handleEdit(t.row)}}},[e._v("编辑")]),e._v(" "),l("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(l){e.handleDelete(t.row)}}},[e._v("删除")])]}}})],1),e._v(" "),l("div",{staticClass:"table-operate"},[l("el-pagination",{attrs:{"current-page":e.tableControl.pageCount,"page-sizes":[20,50,100],"page-size":20,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)])])]),e._v(" "),l("edit-dialog",{directives:[{name:"model",rawName:"v-model",value:e.isShowDlgFlag,expression:"isShowDlgFlag"}],attrs:{pdata:e.currentRowData},domProps:{value:e.isShowDlgFlag},on:{"update-success":e.onUpdateSuccess,input:function(t){e.isShowDlgFlag=t}}})],1)},staticRenderFns:[]}}});