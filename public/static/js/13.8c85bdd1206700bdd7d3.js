webpackJsonp([13],{421:function(t,e,i){i(539);var n=i(2)(i(541),i(542),null,null);t.exports=n.exports},422:function(t,e,i){"use strict";e.a={data:function(){var t=this;return{title:t.$t("niceLinksStr"),siteTitle:t.$t("niceLinksStr"),titleTemplate:"%s | "+this.$t("niceLinksStr"),keywords:t.$t("keywords"),description:t.$t("description")}},created:function(){},metaInfo:function(){var t=this,e=this.title?this.title+" - "+this.siteTitle:""+this.siteTitle;return{title:this.title,titleTemplate:function(e){return e?e+" - "+t.siteTitle:""+t.siteTitle},meta:[{vmid:"title",name:"title",content:e},{vmid:"keywords",name:"keywords",content:this.keywords},{vmid:"description",name:"description",content:this.description},{vmid:"og:type",property:"og:type",content:"website"},{vmid:"og:title",property:"og:title",content:e},{vmid:"og:image",property:"og:image",content:"https://static.nicelinks.site/static/img/favicons/favicon.png"},{vmid:"og:keywords",property:"og:keywords",content:this.keywords},{vmid:"og:description",property:"og:description",content:this.description},{vmid:"twitter:card",name:"twitter:card",content:"summary"},{vmid:"twitter:site",name:"twitter:site",content:"@jeffjade2"},{vmid:"twitter:title",name:"twitter:title",content:e},{vmid:"twitter:image",property:"og:image",content:"https://static.nicelinks.site/static/img/favicons/favicon.png"},{vmid:"twitter:keywords",name:"twitter:keywords",content:this.keywords},{vmid:"twitter:description",name:"twitter:description",content:this.description}]}},mounted:function(){},methods:{}}},539:function(t,e,i){var n=i(540);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i(404)("1f1d2638",n,!0)},540:function(t,e,i){(t.exports=i(403)()).push([t.i,"\n.login-wrap {\n  width: 520px;\n  margin: 0 auto;\n  padding-top: 150px;\n  min-height: 400px;\n  position: relative;\n}\n.login-wrap .login-bottom-tip {\n    font-size: 1.56rem;\n    padding: 15px 0;\n}\n.login-box {\n  width: 520px;\n  padding: 30px 30px 0px 30px;\n  height: 100%;\n  background-color: #fff;\n  clear: both;\n  display: table;\n  border-radius: 3px;\n  border: 1px solid #d7dce5;\n}\n.login-box .nicelinks-logo {\n    margin-bottom: 1rem;\n}\n.login-box .heading {\n    text-align: center;\n    margin-bottom: 30px;\n    font-size: 24px;\n    color: #707473;\n}\n.login-box .el-form-item {\n    margin-bottom: 30px;\n}\n.login-box .el-button {\n    display: block;\n    width: 100%;\n    margin: 0 auto;\n    margin-bottom: 15px;\n}\n.login-box .el-input .icons {\n    display: block;\n    width: 20px;\n    height: 20px;\n    margin: 0;\n    padding: 0;\n}\n@media (max-width: 500px) {\n.login-wrap {\n    width: 100%;\n    padding-top: 60px;\n}\n.login-box {\n    width: 100%;\n    border: 0 none;\n}\n}\n",""])},541:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(422);e.default={name:"Login",data:function(){return{isLoading:!1,checkLoading:!1,tipMessageObj:{},account:{email:"",username:"",userinfo:"",password:""},isLegalUsername:!1,rules:{username:[{required:!0,validator:this.validateUsername,trigger:"change,blur"}],email:[{required:!0,validator:this.validateEmail,trigger:"change,blur"}],userinfo:[{required:!0,validator:this.validateUserinfo,trigger:"change,blur"}],password:[{required:!0,validator:this.validatePassword,trigger:"change,blur"}]}}},mixins:[n.a],created:function(){},mounted:function(){this.updatePageTitle(this.isSignUpPage)},components:{},computed:{isSignUpPage:function(){return"/register"===this.$route.path}},watch:{isSignUpPage:function(t){this.updatePageTitle(t)}},methods:{updatePageTitle:function(t){var e=t?"signUp":"signIn";this.title=this.$t(e)},setMessageTip:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error";this.tipMessageObj={message:t,type:e}},queryUsername:function(){var t=this;this.checkLoading=!0;var e={username:this.account.username};this.$apis.checkIsExisted(e).then(function(e){t.isLegalUsername=!0,t.checkLoading=!1,t.setMessageTip(null)}).catch(function(e){t.checkLoading=!1,t.isLegalUsername=!1,t.setMessageTip(e)})},validateUsername:function(t,e,i){return!e||e.length<=0?i(new Error(this.$t("enterUsernameTip"))):this.$util.isLegalUsername(e)?void i():i(new Error(this.$t("enterLegalUsernameTip")))},validateUserinfo:function(t,e,i){if(!e||e.length<=0)return i(new Error(this.$t("enterUserinfoTip")));i()},validateEmail:function(t,e,i){!e||e.length<=0?i(new Error(this.$t("enterEmailTip"))):this.$util.isLegalEmail(e)?i():i(new Error(this.$t("enterLegalEmailTip")))},validatePassword:function(t,e,i){this.isSignUpPage?!e||e.length<=0?i(new Error(this.$t("enterPwdTip"))):this.$util.isLegalPassword(e)?i():i(new Error(this.$t("enterLegalPwdTip"))):i()},onLoginClick:function(){var t=this;this.$gtagTracking("signin","login","login-signin"),this.isLoading=!0,this.$refs.validateForm.validate(function(e){if(!e)return t.isLoading=!1,!1;var i=t.$util.isLegalEmail(t.account.userinfo),n={email:i?t.account.userinfo:"",username:i?"":t.account.userinfo,password:t.$util.encryptPwd(t.account.password)};t.$apis.login(n).then(function(e){t.$store.commit("$vuexSetUserInfo",e),t.isLoading=!1,t.$router.push("/")}).catch(function(e){t.isLoading=!1,t.setMessageTip(e)})})},onSignupClick:function(){var t=this;this.$gtagTracking("signup","register","register-signup"),this.$refs.validateForm.validate(function(e){if(!e)return!1;t.isLoading=!1;var i={email:t.account.email,username:t.account.username,password:t.$util.encryptPwd(t.account.password)};t.$apis.signup(i).then(function(e){t.setMessageTip(e,"success")}).catch(function(e){t.isLoading=!1,t.setMessageTip(e)})})},onForgotPwdClick:function(){this.$gtagTracking("forgot-pwd","login","forgot-pwd"),this.$router.push("/forgot-pwd")},onBottomClick:function(){var t=["signin","register","register-signin"],e=["register","login","login-register"],i=this.isSignUpPage?t:e;this.$gtagTracking.apply(this,i),this.$router.push(this.isSignUpPage?"/login":"/register")},onBlurUsername:function(){this.isSignUpPage&&this.queryUsername()}},locales:{en:{enterUsernameTip:"Please enter username(Only letters and numbers，3-16)",enterUserinfoTip:"Please enter username Or email",enterLegalUsernameTip:"Please enter username(Only letters and numbers，3-16)",signupBottomTip:"Don't have an account ?",signinBottomTip:"Already have an account?"},zh:{enterUsernameTip:"请输入用户名(仅限字母和数字，3至16位)",enterUserinfoTip:"请输入用户名或邮箱",enterLegalUsernameTip:"请输入用户名(仅限字母和数字，3至16位)",signupBottomTip:"你已拥有一个账号？",signinBottomTip:"还未拥有一个账号？"}}}},542:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"login-wrap"},[i("div",{directives:[{name:"loading",rawName:"v-loading.body",value:t.isLoading,expression:"isLoading",modifiers:{body:!0}}],staticClass:"login-box"},[i("a",{staticClass:"nicelinks-logo gtag-track",attrs:{href:"/explore/all","data-action":"login-logo-link","data-category":"login","data-label":"login-logo-link"}},[i("img",{attrs:{src:"/static/img/favicons/safari-pinned-tab.svg",alt:t.$t("niceLinksStr")}}),t._v(" "),i("h1",[t._v(t._s(t.$t("niceLinksStr")))])]),t._v(" "),i("div",{staticClass:"form-group"},[t.tipMessageObj.message?i("el-alert",{attrs:{title:t.tipMessageObj.message,type:t.tipMessageObj.type}}):t._e()],1),t._v(" "),i("el-form",{ref:"validateForm",attrs:{model:t.account,rules:t.rules}},[t.isSignUpPage?i("el-form-item",{attrs:{prop:"username"}},[i("el-input",{directives:[{name:"model",rawName:"v-model.trim.lazy",value:t.account.username,expression:"account.username",modifiers:{trim:!0,lazy:!0}}],attrs:{icon:t.checkLoading?"loading":"",autofocus:!0},domProps:{value:t.account.username},on:{blur:[t.onBlurUsername,function(e){t.$forceUpdate()}],change:function(e){t.account.username="string"==typeof e?e.trim():e}},nativeOn:{keydown:function(e){t._k(e.keyCode,"enter",13)||t.onLoginClick(e)}}},[i("template",{slot:"prepend"},[i("icon",{staticClass:"icons",attrs:{name:"login-user"}})],1)],2)],1):t._e(),t._v(" "),t.isSignUpPage?i("el-form-item",{attrs:{prop:"email"}},[i("el-input",{directives:[{name:"model",rawName:"v-model.trim",value:t.account.email,expression:"account.email",modifiers:{trim:!0}}],domProps:{value:t.account.email},on:{input:function(e){t.account.email="string"==typeof e?e.trim():e},blur:function(e){t.$forceUpdate()}},nativeOn:{keydown:function(e){t._k(e.keyCode,"enter",13)||t.onLoginClick(e)}}},[i("template",{slot:"prepend"},[i("icon",{staticClass:"icons",attrs:{name:"login-email"}})],1)],2)],1):t._e(),t._v(" "),t.isSignUpPage?t._e():i("el-form-item",{attrs:{prop:"userinfo"}},[i("el-input",{directives:[{name:"model",rawName:"v-model.trim",value:t.account.userinfo,expression:"account.userinfo",modifiers:{trim:!0}}],domProps:{value:t.account.userinfo},on:{input:function(e){t.account.userinfo="string"==typeof e?e.trim():e},blur:function(e){t.$forceUpdate()}},nativeOn:{keydown:function(e){t._k(e.keyCode,"enter",13)||t.onLoginClick(e)}}},[i("template",{slot:"prepend"},[i("icon",{staticClass:"icons",attrs:{name:"login-user"}})],1)],2)],1),t._v(" "),i("el-form-item",{attrs:{prop:"password"}},[i("el-input",{directives:[{name:"model",rawName:"v-model",value:t.account.password,expression:"account.password"}],attrs:{type:"password"},domProps:{value:t.account.password},on:{input:function(e){t.account.password=e}},nativeOn:{keydown:function(e){t._k(e.keyCode,"enter",13)||t.onLoginClick(e)}}},[i("template",{slot:"prepend"},[i("icon",{staticClass:"icons",attrs:{name:"password"}})],1)],2)],1),t._v(" "),t.isSignUpPage?i("el-button",{attrs:{size:"large"},on:{click:t.onSignupClick}},[t._v(t._s(t.$t("signUp")))]):i("el-button",{attrs:{type:"primary",size:"large"},on:{click:t.onLoginClick}},[t._v(t._s(t.$t("signIn")))]),t._v(" "),this.isSignUpPage?t._e():i("el-button",{attrs:{type:"text",size:"large"},on:{click:t.onForgotPwdClick}},[t._v(t._s(t.$t("forgetPwd")))])],1)],1),t._v(" "),i("div",{staticClass:"form-group login-bottom-tip"},[i("p",{staticClass:"text-center"},[t._v(t._s(t.isSignUpPage?t.$t("signupBottomTip"):t.$t("signinBottomTip"))+"\n      "),i("a",{staticClass:"el-button--text",attrs:{href:"javascript:;"},on:{click:t.onBottomClick}},[t._v("\n      "+t._s(t.isSignUpPage?t.$t("signIn"):t.$t("signUp")))])])])])},staticRenderFns:[]}}});