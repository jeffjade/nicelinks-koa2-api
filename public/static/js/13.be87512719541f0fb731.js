webpackJsonp([13],{421:function(e,t,i){i(539);var n=i(2)(i(541),i(542),null,null);e.exports=n.exports},422:function(e,t,i){"use strict";t.a={data:function(){var e=this;return{title:e.$t("niceLinksStr"),siteTitle:e.$t("niceLinksStr"),titleTemplate:"%s | "+this.$t("niceLinksStr"),keywords:e.$t("keywords"),description:e.$t("description")}},created:function(){},metaInfo:function(){var e=this,t=this.title?this.title+" - "+this.siteTitle:""+this.siteTitle;return{title:this.title,titleTemplate:function(t){return t?t+" - "+e.siteTitle:""+e.siteTitle},meta:[{vmid:"title",name:"title",content:t},{vmid:"keywords",name:"keywords",content:this.keywords},{vmid:"description",name:"description",content:this.description},{vmid:"og:type",property:"og:type",content:"website"},{vmid:"og:title",property:"og:title",content:t},{vmid:"og:image",property:"og:image",content:"https://static.nicelinks.site/static/img/favicons/favicon.png"},{vmid:"og:keywords",property:"og:keywords",content:this.keywords},{vmid:"og:description",property:"og:description",content:this.description}]}},mounted:function(){},methods:{}}},539:function(e,t,i){var n=i(540);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i(404)("1f1d2638",n,!0)},540:function(e,t,i){(e.exports=i(403)()).push([e.i,"\n.login-wrap {\n  width: 520px;\n  margin: 0 auto;\n  padding-top: 150px;\n  min-height: 400px;\n  position: relative;\n}\n.login-wrap .login-bottom-tip {\n    font-size: 1.56rem;\n    padding: 15px 0;\n}\n.login-box {\n  width: 520px;\n  padding: 30px 30px 0px 30px;\n  height: 100%;\n  background-color: #fff;\n  clear: both;\n  display: table;\n  border-radius: 3px;\n  border: 1px solid #d7dce5;\n}\n.login-box .nicelinks-logo {\n    margin-bottom: 1rem;\n}\n.login-box .heading {\n    text-align: center;\n    margin-bottom: 30px;\n    font-size: 24px;\n    color: #707473;\n}\n.login-box .el-form-item {\n    margin-bottom: 30px;\n}\n.login-box .el-button {\n    display: block;\n    width: 100%;\n    margin: 0 auto;\n    margin-bottom: 15px;\n}\n.login-box .el-input .icons {\n    display: block;\n    width: 20px;\n    height: 20px;\n    margin: 0;\n    padding: 0;\n}\n@media (max-width: 500px) {\n.login-wrap {\n    width: 100%;\n    padding-top: 60px;\n}\n.login-box {\n    width: 100%;\n    border: 0 none;\n}\n}\n",""])},541:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(422);t.default={name:"Login",data:function(){return{isLoading:!1,checkLoading:!1,tipMessageObj:{},account:{email:"",username:"",userinfo:"",password:""},isLegalUsername:!1,rules:{username:[{required:!0,validator:this.validateUsername,trigger:"change,blur"}],email:[{required:!0,validator:this.validateEmail,trigger:"change,blur"}],userinfo:[{required:!0,validator:this.validateUserinfo,trigger:"change,blur"}],password:[{required:!0,validator:this.validatePassword,trigger:"change,blur"}]}}},mixins:[n.a],created:function(){},mounted:function(){this.updatePageTitle(this.isSignUpPage)},components:{},computed:{isSignUpPage:function(){return"/register"===this.$route.path}},watch:{isSignUpPage:function(e){this.updatePageTitle(e)}},methods:{updatePageTitle:function(e){var t=e?"signUp":"signIn";this.title=this.$t(t)},setMessageTip:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error";this.tipMessageObj={message:e,type:t}},queryUsername:function(){var e=this;this.checkLoading=!0;var t={username:this.account.username};this.$apis.checkIsExisted(t).then(function(t){e.isLegalUsername=!0,e.checkLoading=!1,e.setMessageTip(null)}).catch(function(t){e.checkLoading=!1,e.isLegalUsername=!1,e.setMessageTip(t)})},validateUsername:function(e,t,i){return!t||t.length<=0?i(new Error(this.$t("enterUsernameTip"))):this.$util.isLegalUsername(t)?void i():i(new Error(this.$t("enterLegalUsernameTip")))},validateUserinfo:function(e,t,i){if(!t||t.length<=0)return i(new Error(this.$t("enterUserinfoTip")));i()},validateEmail:function(e,t,i){!t||t.length<=0?i(new Error(this.$t("enterEmailTip"))):this.$util.isLegalEmail(t)?i():i(new Error(this.$t("enterLegalEmailTip")))},validatePassword:function(e,t,i){this.isSignUpPage?!t||t.length<=0?i(new Error(this.$t("enterPwdTip"))):this.$util.isLegalPassword(t)?i():i(new Error(this.$t("enterLegalPwdTip"))):i()},onLoginClick:function(){var e=this;this.$gtagTracking("signin","login","login-signin"),this.isLoading=!0,this.$refs.validateForm.validate(function(t){if(!t)return e.isLoading=!1,!1;var i=e.$util.isLegalEmail(e.account.userinfo),n={email:i?e.account.userinfo:"",username:i?"":e.account.userinfo,password:e.$util.encryptPwd(e.account.password)};e.$apis.login(n).then(function(t){e.$store.commit("$vuexSetUserInfo",t),e.isLoading=!1,e.$router.push("/")}).catch(function(t){e.isLoading=!1,e.setMessageTip(t)})})},onSignupClick:function(){var e=this;this.$gtagTracking("signup","register","register-signup"),this.$refs.validateForm.validate(function(t){if(!t)return!1;e.isLoading=!1;var i={email:e.account.email,username:e.account.username,password:e.$util.encryptPwd(e.account.password)};e.$apis.signup(i).then(function(t){e.setMessageTip(t,"success")}).catch(function(t){e.isLoading=!1,e.setMessageTip(t)})})},onForgotPwdClick:function(){this.$gtagTracking("forgot-pwd","login","forgot-pwd"),this.$router.push("/forgot-pwd")},onBottomClick:function(){var e=["signin","register","register-signin"],t=["register","login","login-register"],i=this.isSignUpPage?e:t;this.$gtagTracking.apply(this,i),this.$router.push(this.isSignUpPage?"/login":"/register")},onBlurUsername:function(){this.isSignUpPage&&this.queryUsername()}},locales:{en:{enterUsernameTip:"Please enter username(Only letters and numbers，3-16)",enterUserinfoTip:"Please enter username Or email",enterLegalUsernameTip:"Please enter username(Only letters and numbers，3-16)",signupBottomTip:"Don't have an account ?",signinBottomTip:"Already have an account?"},zh:{enterUsernameTip:"请输入用户名(仅限字母和数字，3至16位)",enterUserinfoTip:"请输入用户名或邮箱",enterLegalUsernameTip:"请输入用户名(仅限字母和数字，3至16位)",signupBottomTip:"你已拥有一个账号？",signinBottomTip:"还未拥有一个账号？"}}}},542:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"login-wrap"},[i("div",{directives:[{name:"loading",rawName:"v-loading.body",value:e.isLoading,expression:"isLoading",modifiers:{body:!0}}],staticClass:"login-box"},[i("a",{staticClass:"nicelinks-logo gtag-track",attrs:{href:"/explore/all","data-action":"login-logo-link","data-category":"login","data-label":"login-logo-link"}},[i("img",{attrs:{src:"/static/img/favicons/safari-pinned-tab.svg",alt:e.$t("niceLinksStr")}}),e._v(" "),i("h1",[e._v(e._s(e.$t("niceLinksStr")))])]),e._v(" "),i("div",{staticClass:"form-group"},[e.tipMessageObj.message?i("el-alert",{attrs:{title:e.tipMessageObj.message,type:e.tipMessageObj.type}}):e._e()],1),e._v(" "),i("el-form",{ref:"validateForm",attrs:{model:e.account,rules:e.rules}},[e.isSignUpPage?i("el-form-item",{attrs:{prop:"username"}},[i("el-input",{directives:[{name:"model",rawName:"v-model.trim.lazy",value:e.account.username,expression:"account.username",modifiers:{trim:!0,lazy:!0}}],attrs:{icon:e.checkLoading?"loading":"",autofocus:!0},domProps:{value:e.account.username},on:{blur:[e.onBlurUsername,function(t){e.$forceUpdate()}],change:function(t){e.account.username="string"==typeof t?t.trim():t}},nativeOn:{keydown:function(t){e._k(t.keyCode,"enter",13)||e.onLoginClick(t)}}},[i("template",{slot:"prepend"},[i("icon",{staticClass:"icons",attrs:{name:"login-user"}})],1)],2)],1):e._e(),e._v(" "),e.isSignUpPage?i("el-form-item",{attrs:{prop:"email"}},[i("el-input",{directives:[{name:"model",rawName:"v-model.trim",value:e.account.email,expression:"account.email",modifiers:{trim:!0}}],domProps:{value:e.account.email},on:{input:function(t){e.account.email="string"==typeof t?t.trim():t},blur:function(t){e.$forceUpdate()}},nativeOn:{keydown:function(t){e._k(t.keyCode,"enter",13)||e.onLoginClick(t)}}},[i("template",{slot:"prepend"},[i("icon",{staticClass:"icons",attrs:{name:"login-email"}})],1)],2)],1):e._e(),e._v(" "),e.isSignUpPage?e._e():i("el-form-item",{attrs:{prop:"userinfo"}},[i("el-input",{directives:[{name:"model",rawName:"v-model.trim",value:e.account.userinfo,expression:"account.userinfo",modifiers:{trim:!0}}],domProps:{value:e.account.userinfo},on:{input:function(t){e.account.userinfo="string"==typeof t?t.trim():t},blur:function(t){e.$forceUpdate()}},nativeOn:{keydown:function(t){e._k(t.keyCode,"enter",13)||e.onLoginClick(t)}}},[i("template",{slot:"prepend"},[i("icon",{staticClass:"icons",attrs:{name:"login-user"}})],1)],2)],1),e._v(" "),i("el-form-item",{attrs:{prop:"password"}},[i("el-input",{directives:[{name:"model",rawName:"v-model",value:e.account.password,expression:"account.password"}],attrs:{type:"password"},domProps:{value:e.account.password},on:{input:function(t){e.account.password=t}},nativeOn:{keydown:function(t){e._k(t.keyCode,"enter",13)||e.onLoginClick(t)}}},[i("template",{slot:"prepend"},[i("icon",{staticClass:"icons",attrs:{name:"password"}})],1)],2)],1),e._v(" "),e.isSignUpPage?i("el-button",{attrs:{size:"large"},on:{click:e.onSignupClick}},[e._v(e._s(e.$t("signUp")))]):i("el-button",{attrs:{type:"primary",size:"large"},on:{click:e.onLoginClick}},[e._v(e._s(e.$t("signIn")))]),e._v(" "),this.isSignUpPage?e._e():i("el-button",{attrs:{type:"text",size:"large"},on:{click:e.onForgotPwdClick}},[e._v(e._s(e.$t("forgetPwd")))])],1)],1),e._v(" "),i("div",{staticClass:"form-group login-bottom-tip"},[i("p",{staticClass:"text-center"},[e._v(e._s(e.isSignUpPage?e.$t("signupBottomTip"):e.$t("signinBottomTip"))+"\n      "),i("a",{staticClass:"el-button--text",attrs:{href:"javascript:;"},on:{click:e.onBottomClick}},[e._v("\n      "+e._s(e.isSignUpPage?e.$t("signIn"):e.$t("signUp")))])])])])},staticRenderFns:[]}}});